<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Attendance Tracker</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --primary: #5b7cfa;
      --secondary: #22c55e;
      --danger: #ef4444;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--bg);
      padding: 20px;
      color: var(--text);
    }
    .container {
      max-width: 520px;
      margin: auto;
      background: var(--card);
      padding: 22px;
      border-radius: 14px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
    h1 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 14px;
    }
    input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      margin-bottom: 8px;
      font-size: 14px;
    }
    button {
      padding: 8px 12px;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      font-size: 13px;
    }
    .add-btn { width:100%; margin-bottom:12px; background:var(--primary); color:#fff; }
    .present { background:var(--secondary); color:#fff; }
    .absent { background:var(--danger); color:#fff; }
    #counter { text-align:center; font-weight:bold; color:var(--muted); margin-bottom:10px; }
    ul { list-style:none; padding:0; }
    li {
      display:flex; justify-content:space-between; align-items:center;
      background:#f9fafb; padding:10px; margin:6px 0;
      border-radius:10px; border:1px solid var(--border);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Attendance Tracker</h1>

    <input type="text" id="studentName" placeholder="Enter student name" />
    <button class="add-btn" id="addBtn">Add Student</button>
    <button style="width:100%; margin-bottom:10px; background:#ef4444; color:white;" id="clearBtn">Clear All Data</button>

    <div style="display:flex; gap:6px; margin-bottom:10px;">
      <button class="present" style="flex:1" id="allPresent">Mark All Present</button>
      <button class="absent" style="flex:1" id="allAbsent">Mark All Absent</button>
    </div>

    <button style="width:100%; margin-bottom:10px; background:#9ca3af; color:white;" id="resetBtn">Reset Attendance</button>

    <p id="counter"></p>
    <ul id="studentList"></ul>
  </div>

  <script>
    // All logic wrapped safely after DOM load
    document.addEventListener('DOMContentLoaded', () => {
      let students = [];

      const nameInput = document.getElementById('studentName');
      const list = document.getElementById('studentList');
      const counter = document.getElementById('counter');

      document.getElementById('addBtn').onclick = addStudent;
      document.getElementById('clearBtn').onclick = clearAllData;
      document.getElementById('allPresent').onclick = () => markAll('Present');
      document.getElementById('allAbsent').onclick = () => markAll('Absent');
      document.getElementById('resetBtn').onclick = resetAttendance;

      function addStudent() {
        const name = nameInput.value.trim();
        if (!name) return alert('Please enter a student name');
        if (students.length >= 10) return alert('Maximum of 10 students only');
        students.push({ name, status: '' });
        nameInput.value = '';
        saveData();
        display();
      }

      function markAll(status) {
        students.forEach(s => s.status = status);
        saveData();
        display();
      }

      function resetAttendance() {
        students.forEach(s => s.status = '');
        saveData();
        display();
      }

      function removeStudent(i) {
        students.splice(i, 1);
        saveData();
        display();
      }

      function display() {
        list.innerHTML = '';
        let p = 0, a = 0;
        students.forEach((s, i) => {
          if (s.status === 'Present') p++;
          if (s.status === 'Absent') a++;
          const li = document.createElement('li');
          li.innerHTML = `
            <span>${s.name} - <strong>${s.status || 'Not Marked'}</strong></span>
            <span>
              <button class="present">Present</button>
              <button class="absent">Absent</button>
              <button>âœ–</button>
            </span>`;
          const btns = li.querySelectorAll('button');
          btns[0].onclick = () => { s.status='Present'; saveData(); display(); };
          btns[1].onclick = () => { s.status='Absent'; saveData(); display(); };
          btns[2].onclick = () => removeStudent(i);
          list.appendChild(li);
        });
        counter.textContent = `Total Present: ${p} | Total Absent: ${a} | Total Students: ${students.length}`;
      }

      function saveData() {
        localStorage.setItem('attendanceData', JSON.stringify(students));
      }

      function clearAllData() {
        localStorage.removeItem('attendanceData');
        students = [];
        display();
      }
      loadData();
      display();
    });
  </script>
</body>
</html>
